# Table of contents

- [reportSizeImpactIntoGithubPullRequest](#reportSizeImpactIntoGithubPullRequest)
  - [projectPath](#projectpath)
  - [folderRelativePath](#folderrelativepath)
  - [trackingMetaMap](#trackingmetamap)
  - [logLevel](#loglevel)
  - [formatSize](#formatsize)

## reportSizeImpactIntoGithubPullRequest

> `reportSizeImpactIntoGithubPullRequest` is an async function comparing two folder size and commenting a github pull request with the comparison result.

```js
const { reportSizeImpactIntoGithubPullRequest } = require("@jsenv/continuous-size-reporting")

reportSizeImpactIntoGithubPullRequest({
  projectPath: "/Users/you/project",
  folderRelativePath: "/dist",
  trackingMetaMap: {
    "/**/*": true,
    "/**/*.map": false,
  },
  logLevel: "info",
  formatSize: (sizeInBytes) => `${sizeInBytes} bytes`,
  generatedByLink: true,
})
```

— see [source code on github](../src/reportSizeImpactIntoGithubPullRequest/reportSizeImpactIntoGithubPullRequest.js)

### projectPath

> `projectPath` parameter is a string leading to your project root folder.

This parameter is **required**, an example value could be:

```js
"/Users/you/folder"
```

On windows you would pass `C:\Users\you\folder`, that's fine.<br />
You can use `__dirname` to provide this parameter value.<br />
— see [\_\_dirname documentation on node.js](https://nodejs.org/docs/latest/api/modules.html#modules_dirname)

---

### folderRelativePath

> `folderRelativePath` is a string representing a path relative to `projectPath` and leading to the folder you want to track.

This parameter is optionnal, the default value is:

```js
"/dist"
```

It must start with `/`. Relative notation like `./` or `../` are not supported.

---

### trackingMetaMap

> `trackingMetaMap` parameter is an object used to include/exclude certain files from the size impact computation.

This parameter is optionnal, the default value is:

```json
{
  "/**/*": true,
  "/**/*.map": false
}
```

It uses pattern matching provided by [@jsenv/url-meta](https://github.com/jsenv/jsenv-url-meta)

---

### logLevel

> `logLevel` parameter controls verbosity of logs during the function execution.

This parameter is optionnal, the default value is:

```json
"info"
```

The list of available logLevel values can be found on [@jsenv/logger documentation](https://github.com/jsenv/jsenv-logger#list-of-log-levels)

---

### formatSize

> `formatSize` parameter controls the display of file size.

This parameter is optionnal, the default value is:

<!-- prettier-ignore -->
```js
(sizeInBytes) => `${sizeInBytes.toLocaleString()} bytes`
```

---

### generatedByLink

> `generatedByLink` parameter controls if pull request comment contains a generated by message.

This parameter is optionnal, the default value is:

```js
true
```

This parameter allows someone to understand where the pull request message comes from.
